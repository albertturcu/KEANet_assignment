<!DOCTYPE html>
<html>
  <head>
    <title>KEANet</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
  </head>
  <body>
    <h1>KEANet</h1>
    <div>
      <input
        type="checkbox"
        onclick="setInternetConnection()"
        id="chkInternetConnection"
      />
      <label for="chkInternetConnection">Internet connection</label>
      <br />
      <label for="txtPhoneLines">Phone lines</label>
      <input
        type="number"
        disabled
        id="txtPhoneLines"
        value="0"
        min="0"
        max="8"
      />
      <button type="button" class="increment">+</button>
      <button type="button" class="decrement">-</button>
      <br />
      <label for="cmbCellPhones">Cell phones:</label>
      <br />
      <table>
        <tr>
          <td>
            <select id="txtCellPhones" size="5">
              <option value="moto">Motorola G99</option>
              <option value="iphone">iPhone 99</option>
              <option value="samsung">Samsung Galaxy 99</option>
              <option value="sony">Sony Xperia 99</option>
              <option value="huawei">Huawei 99</option>
            </select>
          </td>
          <td>
            <input
              class="selectCellPhone"
              type="button"
              onclick="selectCellPhone()"
              value="&gt;"
            />
            <br />
            <input type="button" onclick="deselectCellPhone()" value="&lt;" />
          </td>
          <td>
            <select id="txtChosenCellPhones" size="5" style="width: 150px">
            </select>
          </td>
        </tr>
      </table>

      <br />
      Total price:
      <span class="totalPrice"></span>
      DKK
      <br />
      <input type="submit" onclick="purchase.buy()" value="Buy" />
    </div>

    <script src="purchase.js" type="text/javascript"></script>
    <script>
      let purchase = new Purchase();

      document.querySelector(".totalPrice").textContent = `${purchase.price}`;

      function setInternetConnection() {
        let internetConnection = document.querySelector(
          "#chkInternetConnection"
        ).checked;
        purchase.setInternetConnection(internetConnection);
        document.querySelector(".totalPrice").textContent = `${purchase.price}`;
      }

      function selectCellPhone() {
        let elementSelection = document.querySelector("#txtCellPhones");
        let option = elementSelection[elementSelection.selectedIndex];

        if (option !== undefined) {
          purchase.selectCellPhone(elementSelection.value);
          document.querySelector(
            ".totalPrice"
          ).textContent = `${purchase.price}`;
        } else {
          alert("Please select a cell phone!");
        }
      }

      function deselectCellPhone() {
        let elementSelection = document.querySelector("#txtChosenCellPhones");
        let option = elementSelection[elementSelection.selectedIndex];

        if (option !== undefined) {
          purchase.deselectCellPhone(elementSelection.value);
          document.querySelector("#txtChosenCellPhones").removeChild(option);
          document.querySelector(
            ".totalPrice"
          ).textContent = `${purchase.price}`;
        } else {
          alert("Please select a cell phone!");
        }
      }
      $(function() {
        $(".selectCellPhone").click(function() {
          let elementSelection = document.querySelector("#txtCellPhones");
          let option = elementSelection[elementSelection.selectedIndex];
          $(
            `<option value=${option.value}>` + option.text + " </option>"
          ).appendTo($("#txtChosenCellPhones"));
        });

        $(".increment").click(function() {
          var $qty = $("#txtPhoneLines");
          var value = $qty.val();
          if (value < 8) {
            value++;
            console.log("value:", value);
            $qty.val(value);
            purchase.increasePhoneLines();
            document.querySelector(
              ".totalPrice"
            ).textContent = `${purchase.price}`;
          }
        });

        $(".decrement").click(function() {
          var $qty = $("#txtPhoneLines");
          var value = $qty.val();
          if (value > 0) {
            value--;
            $qty.val(value);
            purchase.decreasePhoneLines();
            document.querySelector(
              ".totalPrice"
            ).textContent = `${purchase.price}`;
          }
        });
      });
    </script>
  </body>
</html>
